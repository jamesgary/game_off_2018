<!DOCTYPE html>
<html>
  <head>
    <title>GAME</title>
    <link rel="stylesheet" type="text/css" href="./css/main.css">
  </head>
  <body>
    <div id="elm">
    </div>
    <script src="./js/main.js"></script>
    <script>
      var config;

      try {
        flags = JSON.parse(localStorage.getItem("flags"));

        if (!flags) { fail() }
      } catch(e) {
        flags = null;
        localStorage.removeItem("flags");
      }

      var app = Elm.Main.init({
        node: document.getElementById('elm'),
        flags: flags,
      });

      app.ports.saveFlags.subscribe(function(flags) {
        console.log(flags);
        localStorage.setItem("flags", JSON.stringify(flags));
      });

      app.ports.hardReset.subscribe(function() {
        localStorage.removeItem("flags");
      });

      //(function(){var script=document.createElement('script');script.onload=function(){var stats=new Stats();document.body.appendChild(stats.dom);requestAnimationFrame(function loop(){stats.update();requestAnimationFrame(loop)});};script.src='//rawgit.com/mrdoob/stats.js/master/build/stats.min.js';document.head.appendChild(script);})()
    </script>
  </body>
</html>
